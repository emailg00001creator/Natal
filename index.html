<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Natal Imersivo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <style>
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #1a2a6c, #b21f1f, #fdbb2d);
            z-index: 10000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: white; font-family: 'Segoe UI', sans-serif;
        }
        button {
            padding: 20px 50px; font-size: 22px; cursor: pointer;
            background: #27ae60; color: white; border: none; border-radius: 50px;
            font-weight: bold; box-shadow: 0 10px 20px rgba(0,0,0,0.3); transition: 0.3s;
        }
        button:active { transform: scale(0.95); }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">

    <div id="overlay">
        <h1 style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">游꾻 Presente de Natal 游꾸</h1>
        <p>Clique para iniciar a experi칡ncia AR</p>
        <button id="startBtn">INICIAR AGORA</button>
    </div>

    <a-scene id="scene" style="display: none;" 
             renderer="colorManagement: true"
             embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        
        <a-assets>
            <audio id="natalSom" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="auto"></audio>
        </a-assets>

        <a-entity camera look-controls>
            <a-entity position="0 -1.2 -3" scale="0.8 0.8 0.8">
                <a-cone color="#006400" radius-bottom="0.8" height="1.2" position="0 0.6 0"></a-cone>
                <a-cone color="#006400" radius-bottom="0.6" height="1" position="0 1.2 0"></a-cone>
                <a-cone color="#006400" radius-bottom="0.4" height="0.8" position="0 1.6 0"></a-cone>
                <a-cylinder color="#3d2b1f" radius="0.1" height="0.4" position="0 0 0"></a-cylinder>
                <a-sphere color="yellow" radius="0.1" position="0 2.1 0"
                          animation="property: scale; to: 1.5 1.5 1.5; dir: alternate; dur: 500; loop: true"></a-sphere>
                
                <a-text value="FELIZ NATAL!" color="#ff0000" align="center" position="0 2.6 0" width="10"></a-text>
            </a-entity>

            <a-entity position="0 0 -1">
                <a-sphere color="white" radius="0.01" position="-0.5 1 0" animation="property: position; to: -0.5 -1 0; dur: 3000; loop: true"></a-sphere>
                <a-sphere color="white" radius="0.01" position="0.5 1.5 -0.5" animation="property: position; to: 0.5 -1 -0.5; dur: 4500; loop: true"></a-sphere>
                <a-sphere color="white" radius="0.01" position="0 2 0.2" animation="property: position; to: 0 -1 0.2; dur: 3500; loop: true"></a-sphere>
            </a-entity>
        </a-entity>
    </a-scene>

    <script>
        const startBtn = document.getElementById('startBtn');
        const overlay = document.getElementById('overlay');
        const scene = document.getElementById('scene');
        const audio = document.getElementById('natalSom');

        startBtn.addEventListener('click', () => {
            // Tenta iniciar c칙mera e 치udio juntos
            navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                overlay.style.display = 'none';
                scene.style.display = 'block';
                audio.play(); // Inicia m칰sica ap칩s o clique (User Gesture)
                console.log("C칙mera e 치udio liberados!");
            })
            .catch(function(err) {
                alert("ERRO DE PERMISS츾O: V치 nas configura칞칫es do Chrome e permita a c칙mera para este site.");
                console.error("Erro ao acessar c칙mera: ", err);
            });
        });
    </script>
</body>
</html>
