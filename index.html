<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natal MÃ¡gico AR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden; font-family: sans-serif;">
    
    <div id="instrucoes" style="position: fixed; top: 10px; width: 100%; text-align: center; z-index: 10; color: white; background: rgba(0,0,0,0.5); padding: 10px;">
        1. Aceite a cÃ¢mera <br> 
        2. Clique no botÃ£o vermelho <br>
        3. Aponte para o Marcador Hiro
    </div>

    <div style="position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 20;">
        <button id="btnSom" style="padding: 20px 40px; border-radius: 50px; border: none; background: #c0392b; color: white; font-size: 18px; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.5);">
            ðŸŽµ ATIVAR MÃšSICA
        </button>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
      
      <a-assets>
        <audio id="musica" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="auto"></audio>
      </a-assets>

      <a-marker preset="hiro">
        <a-cone position="0 0.5 0" radius-bottom="0.5" height="1" color="#2ecc71"></a-cone>
        <a-sphere position="0 1.1 0" radius="0.1" color="#f1c40f" animation="property: scale; to: 1.2 1.2 1.2; dir: alternate; dur: 1000; loop: true"></a-sphere>
        
        <a-text value="FELIZ NATAL!" position="0 1.5 0" align="center" color="#ffffff" width="6"></a-text>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const btn = document.querySelector('#btnSom');
      const audio = document.querySelector('#musica');
      
      btn.addEventListener('click', function() {
        audio.play().then(() => {
          btn.parentElement.style.display = 'none';
          document.querySelector('#instrucoes').innerHTML = "âœ¨ Agora aponte para o Marcador Hiro!";
        }).catch(err => {
          alert("Erro ao tocar som. Tente clicar novamente.");
        });
      });

      // Verifica se a cÃ¢mera foi carregada
      window.addEventListener('camera-init', (data) => {
          console.log('CÃ¢mera iniciada');
      });
    </script>
  </body>
</html>
